<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <!--    bulk production list view-->
    <record id="bulk_production_tree_view" model="ir.ui.view">
        <field name="name">bulk.production.tree.view</field>
        <field name="model">bulk.production</field>
        <field name="arch" type="xml">
            <tree string="Bulk Production">
                <field name="name"/>
                <field name="garment_receipt"/>
                <field name="product"/>
            </tree>
        </field>
    </record>

    <!--    bulk production form view-->
    <record id="bulk_production_form_view" model="ir.ui.view">
        <field name="name">bulk.production.form.view</field>
        <field name="model">bulk.production</field>
        <field name="arch" type="xml">
            <form string="Bulk Production">
                <header>
                    <!-- <button name="calculate_job_quantity" string="Calculate Jobs" type="object"-->
                    <!--         class="btn-primary"/>-->
                    <button name="generate_mo"
                            string="Generate MO"
                            type="object" class="oe_highlight" groups="base.group_user"
                            attrs="{'invisible': [('is_clicked','=',True)]}"/>
                </header>
                <sheet>
                    <group>
                        <field name="name"/>
                        <field name="garment_receipt"/>
                        <field name="product"/>
                        <field name="is_clicked" invisible="1"/>
                    </group>
                    <group></group>
                    <notebook>
                        <page string="Manufacture Orders" name="manufacture_orders">
                            <field name="manufacture_orders">
                                <tree string="Manufacture Orders">
                                    <field name="name"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Manufacture Operation Stages" name="manufacture_operation_stages">
                            <field name="manufacture_operation_stages">
                                <tree string="Manufacture Operation Stages">
                                    <field name="bom"/>
                                    <field name="lot_size"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!--    action for bulk production-->
    <record id="bulk_production_action" model="ir.actions.act_window">
        <field name="name">Bulk Production</field>
        <field name="res_model">bulk.production</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem
            action="bulk_production_action" id="bulk_production_menu"
            parent="mrp.menu_mrp_manufacturing" sequence="1"/>

    <!-- [UC-08] Manufacturing Orders Form view -->
    <record id="mrp_production_form_view_inherit_union_colombo" model="ir.ui.view">
        <field name="name">mrp.production.form.inherit.union.colombo</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.mrp_production_form_view"/>
        <field name="arch" type="xml">
            <!-- <header>-->
            <xpath expr="//button[@name='action_confirm']" position="after">
                <button name="print_job_card" string="Print Job Card" type="object"
                        class="oe_highlight"/>
                <button name="after_quality_check" string="After Quality Check" type="object" class="oe_highlight"
                        groups="base.group_user"
                        attrs="{'invisible': ['|',('state','!=', 'done'),('quality_check_count', '&gt;', 0)]}"/>
            </xpath>
            <!-- </header> -->

            <!-- [UC-11] -->
            <xpath expr="//sheet/div[1]/button[@name='action_view_mrp_production_childs']" position="before">
                <button name="action_view_quality_check"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-pencil-square-o"
                        attrs="{'invisible': [('quality_check_count', '=', 0)]}">
                    <field name="quality_check_count" widget="statinfo" string="Quality Check"/>
                </button>
            </xpath>

            <xpath expr="//field[@name='bom_id']" position="after">
                <field name="mo_barcode"/>
                <field name="job_no"/>
                <field name="machine_no"/>
                <field name="operator_name"/>
            </xpath>
        </field>
    </record>

    <!--    Manufacture operation stages list view-->
    <record id="manufacture_operation_stages_tree_view" model="ir.ui.view">
        <field name="name">manufacture.operation.stages.tree.view</field>
        <field name="model">manufacture.operation.stages</field>
        <field name="arch" type="xml">
            <tree string="Manufacture Operation Stages">
                <field name="bom"/>
                <field name="lot_size"/>
            </tree>
        </field>
    </record>

    <!--    Manufacture operation stages form view-->
    <record id="manufacture_operation_stages_form_view" model="ir.ui.view">
        <field name="name">manufacture.operation.form.view</field>
        <field name="model">manufacture.operation.stages</field>
        <field name="arch" type="xml">
            <form string="Manufacture Operation Stages">
                <sheet>
                    <group>
                        <group>
                            <field name="bom"/>
                        </group>
                        <group>
                            <field name="lot_size"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Operation Lines" name="operation_lines">
                            <field name="operation_lines">
                                <tree string="Operation Lines" editable="bottom">
                                    <field name="job_no"/>
                                    <field name="job_qty"/>
                                    <field name="machine_no"/>
                                    <field name="operator_name"/>
                                    <field name="barcode"/>
                                    <field name="bulk_production" invisible="1"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

</odoo>